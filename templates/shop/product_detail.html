<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ product.name }}</title>
    <style>
        body { font-family: sans-serif; background: #000000; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        .product-img { width: 100%; max-height: 450px; object-fit: contain; border-radius: 10px; }
        .review-box { border-top: 2px solid #eee; margin-top: 30px; padding-top: 20px; }
        .review { background: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 10px; }
        form input, form textarea { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 5px; border: 1px solid #ddd; }
        .btn-submit { background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

    <div class="container">
        <a href="{% url 'shop' %}" style="text-decoration: none;">На главную</a>
        <hr>

        <div style="display: flex; gap: 30px; flex-wrap: wrap;">
            <div style="flex: 1; min-width: 300px;">
                {% if product.image_url %}
                    <img src="{{ product.image_url }}" class="product-img">
                {% endif %}
            </div>
            <div style="flex: 1; min-width: 300px;">
                <h1>{{ product.name }}</h1>
                <h2 style="color: #28a745;">{{ product.price }} руб.</h2>
                <p>{{ product.description }}</p>
            </div>
        </div>

        <div class="review-box">
            <h3>Отзывы покупателей</h3>
            {% for review in reviews %}
                <div class="review">
                    <strong>{{ review.author }}</strong> (Оценка: {{ review.rating }}/5)
                    <p>{{ review.text }}</p>
                    <small style="color: gray;">{{ review.created_at }}</small>
                </div>
            {% empty %}
                <p>Пока нет отзывов. Будьте первым!</p>
            {% endfor %}

            <hr>
            <a href="{% url 'add_to_cart' product.pk %}"
   style="background: #28a745; color: white; padding: 15px 25px; text-decoration: none; border-radius: 8px; font-weight: bold; display: inline-block; margin-bottom: 20px;">
   Добавить в корзину
</a>
            <h4>Оставить отзыв</h4>
            <form action="{% url 'add_review' product.pk %}" method="post">
                {% csrf_token %}
                <input type="text" name="author" placeholder="Ваше имя" required>
                <textarea name="text" rows="4" placeholder="Ваш отзыв" required></textarea>
                <input type="number" name="rating" min="1" max="5" placeholder="Ваша оценка (1-5)" required>
                <button type="submit" class="btn-submit">Отправить отзыв</button>
            </form>
        </div>
    </div>

</body>
</html>